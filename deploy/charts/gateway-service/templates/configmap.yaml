apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "gateway-service.fullname" . }}-config
  labels:
    {{- include "gateway-service.labels" . | nindent 4 }}
data:
  gateway.yaml: |
    Name: {{ .Values.config.name }}
    Host: {{ .Values.config.host }}
    Port: {{ .Values.config.port }}
    ConfigDataId: {{ .Values.config.configDataId }}
    CommonService:
      Endpoints:
{{ toYaml .Values.config.commonService.endpoints | nindent 8 }}
      Timeout: {{ .Values.config.commonService.timeout }}
      NonBlock: {{ .Values.config.commonService.nonBlock }}
      Middlewares:
        Breaker: {{ .Values.config.commonService.middlewares.breaker }}
    UserService:
      Endpoints:
{{ toYaml .Values.config.userService.endpoints | nindent 8 }}
      Timeout: {{ .Values.config.userService.timeout }}
      NonBlock: {{ .Values.config.userService.nonBlock }}
      Middlewares:
        Breaker: {{ .Values.config.userService.middlewares.breaker }}
    AuthService:
      Endpoints:
{{ toYaml .Values.config.authService.endpoints | nindent 8 }}
      Timeout: {{ .Values.config.authService.timeout }}
      NonBlock: {{ .Values.config.authService.nonBlock }}
      Middlewares:
        Breaker: {{ .Values.config.authService.middlewares.breaker }}
    JwtAuth:
      Issuer: {{ .Values.config.jwtAuth.issuer }}
      CacheSeconds: {{ .Values.config.jwtAuth.cacheSeconds }}
