replicaCount: 1

image:
  repository: harbor.g-oss.top/astraios/common-service
  tag: "latest"
  pullPolicy: IfNotPresent
  # Use an existing imagePullSecret for Harbor authentication.
  # Set to [] to disable.
imagePullSecrets:
  - name: harbor-credential

service:
  type: ClusterIP
  port: 8080

# Probe 配置，可根据部署环境调整时间间隔与阈值。
probes:
  liveness:
    enabled: true
    grpc:
      # gRPC 健康检查的服务名，空字符串表示检查整体服务。
      service: ""
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 2
    failureThreshold: 3
    successThreshold: 1
  readiness:
    enabled: true
    grpc:
      service: ""
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 2
    failureThreshold: 3
    successThreshold: 1

config:
  name: common.rpc
  listenOn: 0.0.0.0:8080
  # RPC 超时（毫秒）
  timeout: 2000
  # 过载保护阈值（0-1000，越小越敏感）
  cpuThreshold: 900
  middlewares:
    breaker: true

nacos:
  enabled: true
  # If set, use an existing Secret with the keys below instead of creating a new one.
  existingSecret: "nacos-credential"
  serverAddr: "nacos:8848"
  username: "nacos"
  password: "nacos"
  namespace: ""
  group: "DEFAULT_GROUP"
  dataIdSuffix: ".yaml"

resources: {}
nodeSelector: {}
tolerations: []
affinity: {}
